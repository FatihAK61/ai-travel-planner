const { GoogleGenerativeAI } = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Ankara, Türkiye, for 6 Days and 5 Night for A Couple with a Luxury budget with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel Address, price, hotel image url, geo coordinates, rating, descriptions and places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket pricing, time travel each of the location for 6 days and 5 night with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a detailed 6-day/5-night luxury travel plan for Ankara, Türkiye, tailored for a couple. I\'ve structured the information in JSON format as requested, including flight details (using placeholders – you\'ll need to replace these with actual flight options), hotel options, and daily itineraries with points of interest.\n\n**Important Notes:**\n\n*   **Flight Information:**  I\'ve included placeholder flight details. You *must* replace these with actual flight information using a flight search engine like Google Flights, Kayak, or Expedia.  Airlines, prices, and availability change constantly.  The booking URLs provided are examples and may need adjustments.\n*   **Pricing:** Prices are *estimates* and can vary significantly depending on the season, availability, and booking time. Always confirm prices before booking.\n*   **Hotel & Attraction Availability:** Check for availability and book in advance, especially for popular attractions and during peak season.\n*   **Transportation:**  I\'ve suggested using taxis or private car services for luxury and convenience within Ankara. Ankara also has a good public transportation system (Ankaray and Metro) if you prefer.  Consider using a ride-hailing app like Uber (if available in Ankara at the time of your travel) or local alternatives.\n*   **Restaurant Reservations:**  Reservations are highly recommended for upscale restaurants.\n*   **Visa Requirements:** Please check visa requirements for Türkiye based on your nationality well in advance of your trip.\n*   **Currency:** The currency in Türkiye is the Turkish Lira (TRY).\n\n```json\n{\n  "tripName": "Luxury Ankara Getaway for Two",\n  "duration": "6 Days / 5 Nights",\n  "location": "Ankara, Türkiye",\n  "budget": "Luxury",\n  "travelers": "Couple",\n  "flightDetails": {\n    "departureCity": "Your Departure City",\n    "arrivalCity": "Ankara (ESB)",\n    "departureDate": "YYYY-MM-DD",\n    "returnDate": "YYYY-MM-DD",\n    "airline": "Turkish Airlines (Example)",\n    "flightNumber": "TK XXXX (Example)",\n    "estimatedPrice": 800,\n    "bookingUrl": "https://www.turkishairlines.com/ (Example)",\n    "notes": "Replace with actual flight details from your chosen airline and booking platform."\n  },\n  "hotelOptions": [\n    {\n      "hotelName": "The Ankara Hotel",\n      "hotelAddress": "Kavaklıdere, Tunalı Hilmi Cd. No:87, 06680 Çankaya/Ankara, Türkiye",\n      "pricePerNight": 300,\n      "hotelImageUrl": "https://example.com/ankara_hotel_image.jpg",\n      "geoCoordinates": {\n        "latitude": 39.9167,\n        "longitude": 32.8667\n      },\n      "rating": 4.7,\n      "description": "A luxurious hotel in the heart of Ankara, offering exquisite rooms, fine dining, and a relaxing spa.",\n      "nearbyPlaces": [\n        {\n          "placeName": "Kuğulu Park",\n          "placeDetails": "A beautiful park with swans, a lovely place for a stroll.",\n          "placeImageUrl": "https://example.com/kugulu_park_image.jpg",\n          "geoCoordinates": {\n            "latitude": 39.919,\n            "longitude": 32.868\n          },\n          "ticketPricing": "Free",\n          "timeTravel": "5 minutes walk"\n        }\n      ]\n    },\n    {\n      "hotelName": "Swissôtel Ankara",\n      "hotelAddress": "Yıldızevler, Jose Marti Cd No:44, 06550 Çankaya/Ankara, Türkiye",\n      "pricePerNight": 280,\n      "hotelImageUrl": "https://example.com/swissotel_ankara_image.jpg",\n      "geoCoordinates": {\n        "latitude": 39.892,\n        "longitude": 32.848\n      },\n      "rating": 4.5,\n      "description": "Offering panoramic city views, luxurious accommodations, and exceptional service.",\n      "nearbyPlaces": [\n        {\n          "placeName": "Pembe Köşk",\n          "placeDetails": "Historical house museum.",\n          "placeImageUrl": "https://example.com/pembe_kosk.jpg",\n          "geoCoordinates": {\n            "latitude": 39.894,\n            "longitude": 32.845\n          },\n          "ticketPricing": "TRY 20",\n          "timeTravel": "10 minutes walk"\n        }\n      ]\n    },\n    {\n      "hotelName": "JW Marriott Hotel Ankara",\n      "hotelAddress": "Via Twins, Muhsin Yazıcıoğlu Caddesi No:1, 06520 Çankaya/Ankara, Türkiye",\n      "pricePerNight": 250,\n      "hotelImageUrl": "https://example.com/marriott_ankara_image.jpg",\n      "geoCoordinates": {\n        "latitude": 39.900,\n        "longitude": 32.816\n      },\n      "rating": 4.6,\n      "description": "Luxury hotel with spacious rooms, excellent dining options, and a full-service spa.",\n      "nearbyPlaces": [\n        {\n          "placeName": "Armada Shopping Mall",\n          "placeDetails": "Shopping mall with many restaurants and entertainment options.",\n          "placeImageUrl": "https://example.com/armada_mall.jpg",\n          "geoCoordinates": {\n            "latitude": 39.898,\n            "longitude": 32.813\n          },\n          "ticketPricing": "Free",\n          "timeTravel": "5 minutes walk"\n        }\n      ]\n    }\n  ],\n  "dailyItinerary": [\n    {\n      "day": 1,\n      "theme": "Arrival and Relaxation",\n      "activities": [\n        {\n          "time": "Morning",\n          "description": "Arrive at Ankara Esenboğa Airport (ESB). Private transfer to your chosen hotel.",\n          "notes": "Arrange for a private car service in advance for a seamless arrival."\n        },\n        {\n          "time": "Afternoon",\n          "description": "Check in to the hotel and relax. Enjoy the hotel\'s amenities, such as the spa or pool.",\n          "bestTimeToVisit": "Anytime after check-in."\n        },\n        {\n          "time": "Evening",\n          "description": "Fine dining experience at the hotel\'s signature restaurant.",\n          "bestTimeToVisit": "8:00 PM",\n          "restaurant": "Hotel Restaurant"\n        }\n      ]\n    },\n    {\n      "day": 2,\n      "theme": "Historical Ankara",\n      "activities": [\n        {\n          "time": "Morning",\n          "description": "Visit Anıtkabir, the mausoleum of Mustafa Kemal Atatürk, the founder of the Republic of Türkiye.",\n          "bestTimeToVisit": "9:00 AM (to avoid crowds)",\n          "placeName": "Anıtkabir",\n          "placeDetails": "The mausoleum of Mustafa Kemal Atatürk.",\n          "placeImageUrl": "https://example.com/anitkabir.jpg",\n          "geoCoordinates": {\n            "latitude": 39.925,\n            "longitude": 32.858\n          },\n          "ticketPricing": "Free",\n          "timeTravel": "20 minutes taxi ride from the hotel"\n        },\n        {\n          "time": "Afternoon",\n          "description": "Explore the Museum of Anatolian Civilizations, housed in a restored Ottoman building.",\n          "bestTimeToVisit": "2:00 PM",\n          "placeName": "Museum of Anatolian Civilizations",\n          "placeDetails": "Archaeological museum with a rich collection.",\n          "placeImageUrl": "https://example.com/anatolia_museum.jpg",\n          "geoCoordinates": {\n            "latitude": 39.938,\n            "longitude": 32.862\n          },\n          "ticketPricing": "TRY 150",\n          "timeTravel": "15 minutes taxi ride from Anıtkabir"\n        },\n        {\n          "time": "Evening",\n          "description": "Dinner at a traditional Turkish restaurant in the Hamamönü district.",\n          "bestTimeToVisit": "7:30 PM",\n          "restaurant": "Hamamönü Restaurant (Example - Search for highly rated restaurants in Hamamönü)",\n          "notes": "Hamamönü is a charming historical area with many restaurants and cafes."\n        }\n      ]\n    },\n    {\n      "day": 3,\n      "theme": "Art and Culture",\n      "activities": [\n        {\n          "time": "Morning",\n          "description": "Visit the CerModern, a modern arts museum.",\n          "bestTimeToVisit": "10:00 AM",\n          "placeName": "CerModern",\n          "placeDetails": "Modern Arts museum",\n          "placeImageUrl": "https://example.com/cermodern.jpg",\n          "geoCoordinates": {\n            "latitude": 39.921,\n            "longitude": 32.843\n          },\n          "ticketPricing": "TRY 80",\n          "timeTravel": "15 minutes taxi ride from Hamamönü"\n        },\n        {\n          "time": "Afternoon",\n          "description": "Explore the State Art and Sculpture Museum.",\n          "bestTimeToVisit": "2:00 PM",\n          "placeName": "State Art and Sculpture Museum",\n          "placeDetails": "Collection of Turkish Art",\n          "placeImageUrl": "https://example.com/art_museum.jpg",\n          "geoCoordinates": {\n            "latitude": 39.923,\n            "longitude": 32.845\n          },\n          "ticketPricing": "TRY 50",\n          "timeTravel": "5 minutes taxi ride from CerModern"\n        },\n        {\n          "time": "Evening",\n          "description": "Enjoy a performance at the State Opera and Ballet (check schedule in advance).",\n          "bestTimeToVisit": "Performance Time (typically 8:00 PM)",\n          "placeName": "State Opera and Ballet",\n          "placeDetails": "Opera house",\n          "placeImageUrl": "https://example.com/opera.jpg",\n          "geoCoordinates": {\n            "latitude": 39.926,\n            "longitude": 32.850\n          },\n          "ticketPricing": "Varies",\n          "timeTravel": "5 minutes taxi ride from the State Art and Sculpture Museum",\n          "notes": "Book tickets well in advance."\n        }\n      ]\n    },\n    {\n      "day": 4,\n      "theme": "Relaxation and Shopping",\n      "activities": [\n        {\n          "time": "Morning",\n          "description": "Enjoy a leisurely morning at the hotel.  Spa treatment or relaxation by the pool.",\n          "bestTimeToVisit": "Anytime"\n        },\n        {\n          "time": "Afternoon",\n          "description": "Shopping at Armada Shopping Mall for luxury brands.",\n          "bestTimeToVisit": "2:00 PM",\n          "placeName": "Armada Shopping Mall",\n          "placeDetails": "Shopping mall with many restaurants and entertainment options.",\n          "placeImageUrl": "https://example.com/armada_mall.jpg",\n          "geoCoordinates": {\n            "latitude": 39.898,\n            "longitude": 32.813\n          },\n          "ticketPricing": "Free",\n          "timeTravel": "15 minutes taxi ride"\n        },\n        {\n          "time": "Evening",\n          "description": "Dinner at Trilye, renowned seafood restaurant.",\n          "bestTimeToVisit": "8:00 PM",\n          "restaurant": "Trilye",\n          "notes": "Requires a reservation well in advance."\n        }\n      ]\n    },\n    {\n      "day": 5,\n      "theme": "Day Trip to Beypazarı",\n      "activities": [\n        {\n          "time": "Morning",\n          "description": "Day trip to Beypazarı, a charming historical town known for its Ottoman architecture and local crafts. Arrange for a private car and driver.",\n          "bestTimeToVisit": "9:00 AM (early start)",\n          "placeName": "Beypazarı",\n          "placeDetails": "Historical town with Ottoman architecture.",\n          "placeImageUrl": "https://example.com/beypazari.jpg",\n          "geoCoordinates": {\n            "latitude": 40.150,\n            "longitude": 31.867\n          },\n          "ticketPricing": "Free (entry to town)",\n          "timeTravel": "1.5-hour drive from Ankara"\n        },\n        {\n          "time": "Afternoon",\n          "description": "Explore the town, visit the Beypazarı Living Museum, and shop for local souvenirs.",\n          "bestTimeToVisit": "Afternoon",\n            "placeName": "Beypazarı Living Museum",\n            "placeDetails": "Local art museum",\n            "placeImageUrl": "https://example.com/beypazari_museum.jpg",\n            "geoCoordinates": {\n              "latitude": 40.149,\n              "longitude": 31.869\n            },\n            "ticketPricing": "TRY 50",\n          "notes": "Enjoy lunch at a local restaurant in Beypazarı."\n        },\n        {\n          "time": "Evening",\n          "description": "Return to Ankara. Farewell dinner at a restaurant of your choice.",\n          "bestTimeToVisit": "8:00 PM",\n          "restaurant": "Restaurant of your choice",\n          "notes": "Consider a restaurant with a view of the city."\n        }\n      ]\n    },\n    {\n      "day": 6,\n      "theme": "Departure",\n      "activities": [\n        {\n          "time": "Morning",\n          "description": "Enjoy a final breakfast at the hotel.",\n          "bestTimeToVisit": "Anytime"\n        },\n        {\n          "time": "Afternoon",\n          "description": "Check out of the hotel. Private transfer to Ankara Esenboğa Airport (ESB) for your departure flight.",\n          "notes": "Allow ample time for airport security and check-in."\n        }\n      ]\n    }\n  ]\n}\n```\n\n**How to Use This Plan:**\n\n1.  **Replace Placeholders:**  Fill in the `flightDetails` section with your actual flight information.\n2.  **Choose a Hotel:** Select a hotel from the `hotelOptions` list and book it.\n3.  **Customize:** Adjust the daily activities based on your interests. You can add or remove activities.\n4.  **Bookings:**  Make reservations for restaurants, tours, and performances in advance.\n5.  **Transportation:** Arrange for private car services or familiarize yourself with Ankara\'s public transportation system.\n6.  **Enjoy!** Have a wonderful and luxurious trip to Ankara!\n',
        },
      ],
    },
  ],
});
